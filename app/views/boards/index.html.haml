- curRow = 0
- grayBG = false
- unless @p.nil?
  - @p.each do |p|
    - @b.get_todos(p).each do |todo|
      - todo.todo_items.each do |item|
        - @margin = "margin-top:" + (curRow*30).to_s + "px"
        .tableListElement
          venue
        .tableListElement
          = p.name
        .tableListElement
          = item.content
        .tableListElement
          venue
        .tableListElement
          = todo.name.nil? ? todo.description : todo.name
        .tableListElement
          - if (item.respond_to?(:due_at) && !item.due_at.nil?)
            = item.due_at.strftime("%d %b %Y")
        .tableListElement
          - if item.respond_to?(:responsible_party_name)
            = item.responsible_party_name
        %br/
      -#%div.clear
